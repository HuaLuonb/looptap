<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="Cache-control" content="public" />
		<meta
			name="viewport"
			content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
		/>
		<meta name="description" content="A minimal game to waste your time." />
		<meta name="keywords" content="minimal game, html5 game, svg game" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
		<meta name="apple-mobile-web-app-title" content="Looptap" />
		<meta name="application-name" content="Looptap" />
		<meta name="theme-color" content="#fbf9f6" />
		<meta property="og:url" content="https://vasanthv.github.io/looptap" />
		<meta property="og:image" content="https://vasanthv.github.io/looptap/banner.png" />
		<meta property="og:title" content="Looptap" />
		<meta property="og:description" content="A minimal game to waste your time." />
		<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
		<link rel="icon" href="favicon.svg" />
		<link rel="manifest" href="manifest.json" />
		<link rel="mask-icon" href="safari-pinned-tab.svg" color="#2c3d51" />
		<meta name="msapplication-TileColor" content="#fbf9f6" />
		<meta name="theme-color" content="#fbf9f6" />
		<title>Looptap - A minimal game to waste your time</title>

		<link href="style.css" rel="stylesheet" />
		<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
		<script defer src="script.js"></script>

		<style>
			#debug-panel {
				position: fixed;
				top: 10px;
				right: -300px; /* 默认隐藏 */
				background: rgba(0,0,0,0.8);
				color: white;
				padding: 15px;
				z-index: 1000;
				border-radius: 12px;
				width: 280px;
				box-shadow: 0 4px 6px rgba(0,0,0,0.1);
				transition: right 0.3s ease;
			}

			#debug-panel.open {
				right: 10px; /* 打开时显示 */
			}

			.password-section {
				display: flex;
				gap: 10px;
			}

			.password-section input {
				flex-grow: 1;
				padding: 8px;
				border-radius: 6px;
				border: 1px solid #444;
				background: #333;
				color: white;
			}

			.password-section button {
				padding: 8px 15px;
				background: #4CAF50;
				color: white;
				border: none;
				border-radius: 6px;
				cursor: pointer;
			}

			.debug-settings {
				margin-top: 15px;
			}

			.debug-settings input {
				width: 100%;
				margin-bottom: 10px;
				padding: 8px;
				border-radius: 6px;
				border: 1px solid #444;
				background: #333;
				color: white;
			}

			.debug-settings button {
				width: 100%;
				padding: 10px;
				background: #4CAF50;
				color: white;
				border: none;
				border-radius: 6px;
				cursor: pointer;
				transition: background 0.3s ease;
			}

			.debug-toggle-btn {
				position: fixed;
				top: 10px;
				right: 10px;
				z-index: 1001;
				padding: 8px 15px;
				background: #2196F3;
				color: white;
				border: none;
				border-radius: 6px;
				cursor: pointer;
			}
		</style>
	</head>

	<body>
		<div id="canvas">
			<div id="looptap">
				<svg 
					id="bg" 
					viewBox="0 0 100 100" 
					xmlns="http://www.w3.org/2000/svg"
				>
					<path
						id="arc"
						fill="none"
						v-bind:stroke="colors[Math.floor(score / 10)] || colors[Math.floor((score - 270) / 10)] || '#bdc3c7'"
						stroke-width="10"
						stroke-linejoin="round"
						stroke-linecap="round"
						v-bind:d="arcDValue"
					/>
					<circle
						id="ball"
						cx="50"
						cy="50"
						r="4"
						fill="#2C3D51"
						v-bind:class="state"
						v-bind:style="'animation-duration: '+(2000 - taps * 5) + 'ms'"
					/>
					<polygon
						id="play"
						points="45,45 55,50 45,55"
						fill="#2C3D51"
						stroke="#2C3D51"
						stroke-width="5"
						stroke-linejoin="round"
						stroke-linecap="round"
						v-if="state !== 'started'"
						v-on:click="startPlay"
					/>
				</svg>
			</div>

			<button @click="toggleDebugPanel" class="debug-toggle-btn">
				{{ debugPanelOpen ? '关闭' : '打开' }}调试
			</button>

			<div id="debug-panel" :class="{ 'open': debugPanelOpen }">
				<div v-if="!passwordEntered" class="password-section">
					<input 
						type="password" 
						v-model="passwordInput" 
						placeholder="输入密码" 
						@keyup.enter="checkPassword"
					>
					<button @click="checkPassword">确认</button>
				</div>
				
				<div v-else>
					<h3>调试信息</h3>
					<div>
						<p>状态: {{ state }}</p>
						<p>分数: {{ score }}</p>
						<p>点击次数: {{ taps }}</p>
						<p>颜色: {{ colors[Math.floor(score / 10)] || '未知' }}</p>
					</div>

					<div class="debug-settings">
						<div>
							<input type="number" v-model.number="debugSettings.maxScore" placeholder="最大分数">
							<button @click="enableDebugMode({ maxScore: debugSettings.maxScore })">设置最大分数</button>
						</div>
						<div>
							<input type="number" v-model.number="debugSettings.minScore" placeholder="最小分数">
							<button @click="enableDebugMode({ minScore: debugSettings.minScore })">设置最小分数</button>
						</div>
						<div>
							<input type="number" v-model.number="debugSettings.customTolerance" placeholder="自定义容错率">
							<p>当前容错率: {{ debugSettings.tapTolerance + debugSettings.customTolerance }}</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
